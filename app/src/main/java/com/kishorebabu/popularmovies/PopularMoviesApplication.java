package com.kishorebabu.popularmovies;import android.app.Application;import android.content.Context;import android.content.SharedPreferences;import android.util.Log;import android.widget.Toast;import retrofit.JacksonConverterFactory;import retrofit.Retrofit;import timber.log.Timber;import timber.log.Timber.DebugTree;import timber.log.Timber.Tree;/** * Created by Kishore on 2/28/2016. */public class PopularMoviesApplication extends Application {    private static MovieDBApi movieDBApiSharedInstance;    private static Context appContext;    @Override    public void onCreate() {        super.onCreate();        appContext = getApplicationContext();        if (BuildConfig.DEBUG) {            Timber.plant(new DebugTree());        } else {            Timber.plant(new FabricCrashReportingTree());        }        movieDBApiSharedInstance = new Retrofit.Builder()                .baseUrl(Constants.TMDB_BASE_URL)                .addConverterFactory(JacksonConverterFactory.create())                .build()                .create(MovieDBApi.class);    }    public static MovieDBApi getServiceSharedInstance() {        if (movieDBApiSharedInstance == null) {            movieDBApiSharedInstance = new Retrofit.Builder()                    .baseUrl(Constants.TMDB_BASE_URL)                    .addConverterFactory(JacksonConverterFactory.create())                    .build()                    .create(MovieDBApi.class);        }        return movieDBApiSharedInstance;    }    public static Context getAppContext() {        return appContext;    }    private class FabricCrashReportingTree extends Tree {        @Override        protected void log(int priority, String tag, String message, Throwable t) {            if (priority == Log.VERBOSE || priority == Log.DEBUG || priority == Log.INFO) {                return;            }            if (BuildConfig.DEBUG)                Toast.makeText(PopularMoviesApplication.this, message, Toast.LENGTH_SHORT).show();//            Exception e;//            if (t == null)//                e = new Exception("No Throwable exception");//            else//                e = new Exception(t);//            Mint.logExceptionMessage(tag, message, e);        }    }}